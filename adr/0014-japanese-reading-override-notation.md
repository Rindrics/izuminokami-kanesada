# ADR-0014: 日本語読みオーバーライド記法

## ステータス

採用

## コンテキスト

書き下し文（japanese フィールド）において、漢字の読みは通常 `kunyomi-dictionary` から自動的に取得される。しかし、同じ漢字でも文脈によって異なる読みが必要な場合がある。

例：
- 「為る」を「たる」と読む場合（辞書のデフォルトは「な」す）
- 「之」を「これ」と読む場合と「の」と読む場合

辞書に複数の読みを登録することは可能だが、どの読みを使うかをコンテンツ側で指定する仕組みが必要。

## 決定

**全角括弧によるオーバーライド記法** を採用する。

### 記法

```text
漢字（読み）
```

- 漢字の直後に全角括弧で読みを指定する
- 指定された読みは辞書の読みを上書きする

### 例

```yaml
japanese: 有子曰く、...孝弟なる者は、其れ仁の本為（た）るか。
```

この場合、「為」は辞書の読み（「な」す等）ではなく「た」と表示される。

### パースルール

1. 正規表現: `/([一-龥])（([ぁ-ん]+)）/g`
2. マッチした場合、漢字に対して括弧内の読みを適用
3. 括弧は表示時に除去される

### 表示結果

入力: `為（た）る`
表示: 為（ルビ: た） + る

## 根拠

- **自然さ**: 日本語文に括弧で注釈を入れるのは一般的な慣習
- **シンプル**: 入力しやすく、パース実装も容易
- **可読性**: 生のテキストを読んでも意味が通じる
- **非侵襲的**: 辞書データを変更せずにコンテンツ単位でカスタマイズ可能

## 影響

- `JapaneseTextWithRuby` コンポーネントがオーバーライド記法をパースする
- コンテンツ作成者は必要に応じてオーバーライド記法を使用できる
- 辞書に存在しない読みも指定可能

## 関連

- [ADR-0005: 日本語ルビ構造](./0005-japanese-ruby-structure.md)
- `src/components/JapaneseTextWithRuby.tsx`
