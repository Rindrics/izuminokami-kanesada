# ADR-0011: 改行マーカー規約

## ステータス

採用

## コンテキスト

漢文テキストを画面に表示する際、長い文は適切な位置で改行する必要がある。しかし、意味の区切り（スペース）だけでは、どこで改行すべきかをブラウザに伝えることができない。

例：「其為人也孝弟 而好犯上者 鮮矣 不好犯上 而好作亂者 未之有也 君子務本 本立而道生 孝弟也者 其為仁之本與」

この文は複数の節から成り、節の境界で改行するのが読みやすい：
- 「鮮矣」の後（第一節の終わり）
- 「未之有也」の後（第二節の終わり）
- 「本立而道生」の後（第三節の終わり）

## 決定

テキストデータ内で **セミコロン（`;`）を改行マーカー** として使用する。

### ルール

1. **`;` は強制改行を示す**: セミコロンの位置で必ず改行される
2. **表示時は非表示**: `;` は画面表示時に除去される
3. **スペースとの併用**: セミコロンの前後にスペースを置くかどうかは任意（トリムされる）

### 記法例

```text
# 入力テキスト
有子曰 其為人也孝弟 而好犯上者 鮮矣; 不-好犯上 而好作亂者 未之有也; 君子務本 本立而道生; 孝弟也者 其為仁之本與

# 表示結果（改行位置を / で示す）
有子曰 其為人也孝弟 而好犯上者 鮮矣
/不好犯上 而好作亂者 未之有也
/君子務本 本立而道生
/孝弟也者 其為仁之本與
```

### マーカーの使い分け

| マーカー | 用途 | 表示 |
|----------|------|------|
| スペース | 意味の区切り（改行可能位置） | 広めの間隔 |
| `-` | 声調変化接続（ADR-0007） | 非表示 |
| `;` | 強制改行 | 非表示 + 改行 |

## 根拠

- **明示的**: 改行位置を明示するため、曖昧さがない
- **シンプル**: 1 文字のマーカーで表現可能
- **可読性**: 原文の構造が保たれ、人間が読んでも句読点として自然
- **処理単純**: パーサー実装がシンプル（`split(';')` で分割可能）

## 影響

- コンテンツ作成者は改行したい位置に `;` を明示的に記述する必要がある
- `HakubunWithTabs` コンポーネントが `;` マーカーを解釈し、`<br>` 要素を挿入する
- 全モード（白文、音読み、ピンイン、ビジュアル）で一貫して動作する

## 関連

- [ADR-0007: 接続マーカー規約](./0007-connection-marker-convention.md) - ハイフンマーカーの規約
- `src/components/HakubunWithTabs.tsx` - マーカー処理の実装
